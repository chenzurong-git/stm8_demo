# STM8 开发示例项目

## 项目简介
这是一个基于 STM8 系列微控制器的开发示例项目，提供了基础的硬件抽象层、系统配置和应用示例。

## 项目结构

```
├── .gitignore       # Git忽略文件配置
├── APP/             # 应用层代码
│   ├── app_task.c   # 应用任务实现
│   ├── app_task.h   # 应用任务头文件
│   ├── main.c       # 主程序入口
│   └── msh/         # 命令行交互模块
├── BSP/             # 板级支持包
│   ├── clk/         # 时钟相关配置
│   ├── sys/         # 系统相关功能
│   ├── timer/       # 定时器功能实现
│   └── uart/        # 串口通信功能
├── IAR/             # IAR工程文件
│   └── settings/    # IAR配置文件
├── Lib/             # STM8标准库
│   ├── inc/         # 头文件
│   ├── src/         # 源文件
│   └── stm8s_conf.h # 库配置文件
├── Min_Task_OS/     # 轻量级实时操作系统
│   ├── inc/         # 操作系统头文件
│   └── src/         # 操作系统源文件
└── README.md        # 项目说明文档
```

## 目录说明
- **APP/**: 包含应用层代码，实现具体的业务逻辑和任务定义
- **BSP/**: 板级支持包，封装了底层硬件操作，提供统一的接口
- **Lib/**: 包含STM8标准库文件，提供MCU的基础功能支持
- **IAR/**: 包含IAR开发环境的工程文件和配置
- **Min_Task_OS/**: 轻量级实时操作系统，提供任务调度和管理功能

## 快速开始

### 开发环境准备
1. 安装 [IAR Embedded Workbench for STM8](https://www.iar.com/products/architectures/arm/iar-embedded-workbench-for-arm/)
2. 安装相应的STM8调试器驱动

### 编译项目
1. 使用IAR打开位于 `IAR/stm8_demo.eww` 的工程文件
2. 选择对应的编译配置（Debug/Release）
3. 点击编译按钮或使用快捷键 `F7` 进行编译

### 烧录运行
1. 连接STM8开发板到电脑
2. 在IAR中点击下载按钮或使用快捷键 `Ctrl+D` 下载程序
3. 点击运行按钮或使用快捷键 `Ctrl+R` 开始运行

## 功能模块

### BSP模块
- **clk**: 时钟配置与管理，支持外部HSE和内部HSI振荡器配置
- **sys**: 系统初始化、延时功能等基础功能
- **timer**: 系统定时器实现，提供毫秒级时间基准
- **uart**: 串口通信功能，包括发送和接收

### Min_Task_OS模块
- **mtos_list**: 单向链表实现，用于任务管理
- **mtos_task**: 任务创建、调度和管理功能
- 支持任务状态管理、任务遍历、按名称查找和执行任务

### APP模块
- **main.c**: 主程序，包含初始化和主循环
- **app_task.c/app_task.h**: 应用任务定义和实现
- **msh**: 简单的命令行交互功能，提供用户交互界面

## 注意事项
1. 确保使用正确版本的IAR Embedded Workbench for STM8开发环境
2. 编译前检查工程配置是否正确
3. 下载程序前确认调试器连接正常
4. 具体硬件引脚定义请参考相关硬件文档
5. Min_Task_OS为轻量级实时操作系统，请按照API规范使用任务管理功能
6. 修改时钟配置时，需根据实际硬件平台选择合适的振荡器配置

## 版权信息
本项目仅供学习和参考使用。
